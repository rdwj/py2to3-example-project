{
  "plan_date": "2026-02-12",
  "description": "The critical path through the conversion DAG -- the longest dependency chain that determines the minimum migration calendar time.",

  "critical_path": [
    {
      "step": 1,
      "unit_id": "CU-01",
      "unit_name": "core-foundation",
      "wave": 1,
      "modules": [
        "src/core/exceptions.py",
        "src/core/types.py",
        "src/core/config_loader.py",
        "src/core/string_helpers.py",
        "src/core/utils.py",
        "src/core/itertools_helpers.py"
      ],
      "py2_isms": 101,
      "lines": 1209,
      "effort_hours_low": 8,
      "effort_hours_high": 14,
      "risk": "high",
      "blocking_reason": "Gateway unit. All 5 downstream source units depend on these modules. fan_in=40 across the 4 gateway modules.",
      "key_challenges": [
        "string_helpers.py: Complete str/unicode/bytes type-check redesign (22 issues, 20 semantic)",
        "types.py: __cmp__->__lt__/__eq__, __nonzero__->__bool__, __div__->__truediv__, long literal removal",
        "exceptions.py: except comma syntax (5), raise two-arg syntax (4), sys.exc_type/exc_value removal (3)",
        "config_loader.py: ConfigParser->configparser, __builtin__->builtins, 15 print statements",
        "itertools_helpers.py: itertools.izip->zip, dict.viewkeys->keys, iterator.next()->next()"
      ]
    },
    {
      "step": 2,
      "unit_id": "CU-04",
      "unit_name": "data-processing",
      "wave": 2,
      "modules": [
        "src/data_processing/mainframe_parser.py",
        "src/data_processing/csv_processor.py",
        "src/data_processing/xml_transformer.py",
        "src/data_processing/json_handler.py",
        "src/data_processing/text_analyzer.py",
        "src/data_processing/log_parser.py"
      ],
      "py2_isms": 143,
      "lines": 2119,
      "effort_hours_low": 14,
      "effort_hours_high": 24,
      "risk": "high",
      "blocking_reason": "Largest unit by LOC and issue count. Data processing modules are exercised by existing tests that must pass before Wave 4.",
      "key_challenges": [
        "mainframe_parser.py: 55 issues (highest single file), EBCDIC byte handling, cPickle load/dump, long literals, file() builtin",
        "csv_processor.py: Py3 csv requires text mode (not binary), entire unicode wrapper pattern needs replacement",
        "json_handler.py: json.loads/dumps encoding= removal (5 instances), cPickle for staging files",
        "xml_transformer.py: HTMLParser import rename, dict.has_key removal",
        "text_analyzer.py: commands module -> subprocess, map/filter returning iterators",
        "log_parser.py: file.xreadlines(), commands module, os.popen"
      ]
    },
    {
      "step": 3,
      "unit_id": "CU-08",
      "unit_name": "package-inits",
      "wave": 4,
      "modules": [
        "src/core/__init__.py",
        "src/io_protocols/__init__.py",
        "src/data_processing/__init__.py",
        "src/storage/__init__.py",
        "src/automation/__init__.py",
        "src/reporting/__init__.py"
      ],
      "py2_isms": 22,
      "lines": 78,
      "effort_hours_low": 1,
      "effort_hours_high": 2,
      "risk": "low",
      "blocking_reason": "Tests import through package facades. __init__.py files must use explicit relative imports before tests can run.",
      "key_challenges": [
        "All 22 issues are implicit relative imports -- mechanical fix with leading dot"
      ]
    },
    {
      "step": 4,
      "unit_id": "CU-09-tests",
      "unit_name": "tests",
      "wave": 4,
      "modules": [
        "tests/conftest.py",
        "tests/test_core_types.py",
        "tests/test_csv_processor.py",
        "tests/test_mainframe_parser.py",
        "tests/test_modbus.py",
        "tests/test_report_generator.py",
        "tests/__init__.py"
      ],
      "py2_isms": 56,
      "lines": 695,
      "effort_hours_low": 3,
      "effort_hours_high": 5,
      "risk": "medium",
      "blocking_reason": "Tests validate the migration. Must pass before scripts can be considered safe. Provides regression safety net for the entire migration.",
      "key_challenges": [
        "test_mainframe_parser.py: 13 long type references (isinstance checks, literal comparisons)",
        "test_core_types.py: cmp() builtin usage in 5 assertions",
        "conftest.py: str.decode('hex') -> bytes.fromhex()",
        "test_csv_processor.py, test_report_generator.py: StringIO import rename"
      ]
    },
    {
      "step": 5,
      "unit_id": "CU-09",
      "unit_name": "scripts-and-setup",
      "wave": 5,
      "modules": [
        "scripts/batch_import.py",
        "scripts/generate_ebcdic_data.py",
        "scripts/run_platform.py",
        "scripts/sensor_monitor.py",
        "setup.py"
      ],
      "py2_isms": 1,
      "lines": 617,
      "effort_hours_low": 2,
      "effort_hours_high": 4,
      "risk": "medium",
      "blocking_reason": "Final integration validation. setup.py distutils->setuptools is the last known blocker for Python 3.12 compatibility.",
      "key_challenges": [
        "setup.py: distutils.core.setup -> setuptools.setup (CRITICAL blocker for 3.12)",
        "Integration testing: run each script end-to-end against converted modules"
      ]
    }
  ],

  "critical_path_summary": {
    "total_steps": 5,
    "total_units": 5,
    "total_modules": 30,
    "total_py2_isms": 323,
    "total_lines": 4718,
    "effort_hours_low": 28,
    "effort_hours_high": 49,
    "bottleneck_unit": "CU-04 (data-processing)",
    "bottleneck_reason": "14-24 hours, 143 Py2-isms across 2,119 lines. mainframe_parser.py alone has 55 issues."
  },

  "alternative_paths": [
    {
      "path": ["CU-01", "CU-03", "CU-08", "CU-09-tests", "CU-09"],
      "label": "io-protocols path",
      "effort_hours_low": 24,
      "effort_hours_high": 43,
      "notes": "Nearly as long as the critical path. If io-protocols conversion takes longer than expected (complex binary protocol work), this becomes the actual critical path."
    },
    {
      "path": ["CU-01", "CU-05", "CU-08", "CU-09-tests", "CU-09"],
      "label": "storage path",
      "effort_hours_low": 17,
      "effort_hours_high": 29,
      "notes": "Shorter but contains the highest-risk single issue (str(buffer)->bytes silent corruption in database.py)."
    }
  ],

  "parallelism_opportunities": {
    "wave_2": {
      "parallel_units": ["CU-03", "CU-04", "CU-05"],
      "max_parallel_workers": 3,
      "notes": "All three depend only on CU-01. No inter-dependencies. Can be assigned to separate developers."
    },
    "wave_3": {
      "parallel_units": ["CU-06", "CU-07"],
      "max_parallel_workers": 2,
      "notes": "Both depend only on CU-01. Completely independent of Wave 2 units (they don't depend on io_protocols, data_processing, or storage). Can start as soon as Wave 1 completes, even if Wave 2 is still in progress."
    },
    "wave_4": {
      "parallel_units": ["CU-08", "CU-09-tests"],
      "max_parallel_workers": 2,
      "notes": "CU-08 (package inits) is a prerequisite for CU-09-tests since tests import through package facades. However, CU-08 takes only 1-2 hours, so the serialization is minimal."
    }
  }
}
